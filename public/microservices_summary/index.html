<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>微服务概述 | FAN&#39;S BLOG</title>
        <meta name="Description" content="syncd blog, 在成为高级开发者的路上....."><meta property="og:title" content="微服务概述" />
<meta property="og:description" content="微服务概述 单体应用 学习微服务之前先看看看传统的单体应用 什么是单体应用 所有的业务功能都在一个应用程序里面 研发人员开发并维护同一个代码库 架构简单" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://example.org/microservices_summary/" />
<meta property="article:published_time" content="2020-04-30T07:06:58+08:00" />
<meta property="article:modified_time" content="2020-04-30T07:06:58+08:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="微服务概述"/>
<meta name="twitter:description" content="微服务概述 单体应用 学习微服务之前先看看看传统的单体应用 什么是单体应用 所有的业务功能都在一个应用程序里面 研发人员开发并维护同一个代码库 架构简单"/>
<meta name="theme-color" content="#ffffff">
<meta name="msapplication-TileColor" content="#da532c">
<link rel="canonical" href="http://example.org/microservices_summary/" />
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="prev" href="http://example.org/development_standard/" /><link rel="next" href="http://example.org/postgresql_notes_1/" /><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><link rel="stylesheet" href="/css/style.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "微服务概述",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http:\/\/example.org\/microservices_summary\/"
        },"image": {
                "@type": "ImageObject",
                "url": "http:\/\/example.org\/cover.png",
                "width":  800 ,
                "height":  600 
            },"genre": "posts","keywords": "微服务","wordcount":  988 ,
        "url": "http:\/\/example.org\/microservices_summary\/","datePublished": "2020-04-30","dateModified": "2020-04-30","publisher": {
                "@type": "Organization",
                "name": "赵凡",
                "logo": {
                "@type": "ImageObject",
                "url": "http:\/\/example.org\/logo.png",
                "width":  127 ,
                "height":  40 
                }
            },"author": {
                "@type": "Person",
                "name": "fan"
            },"description": ""
    }
    </script></head>
    <body><script>
            if (!window.localStorage || !window.localStorage.getItem('theme')) {window.isDark = window.matchMedia('(prefers-color-scheme: dark)').matches;} else {
                window.isDark = (window.localStorage && window.localStorage.getItem('theme')) === 'dark';
            }
            window.isDark && document.body.classList.add('dark-theme');
        </script><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/">FAN&#39;S BLOG</a>
        </div>
        <div class="menu"><a class="menu-item" href="/posts/" rel="noopener noreffer">文章</a><a class="menu-item" href="/tags/" rel="noopener noreffer">标签</a><a class="menu-item" href="/categories/" rel="noopener noreffer">分类</a><a class="menu-item" href="/about/" rel="noopener noreffer">关于</a><span class="menu-item">|</span>
            <a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-wrapper">
        <div class="header-container">
            <div class="header-title">
                <a href="/">FAN&#39;S BLOG</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/posts/" title="" rel="noopener noreffer">文章</a><a class="menu-item" href="/tags/" title="" rel="noopener noreffer">标签</a><a class="menu-item" href="/categories/" title="" rel="noopener noreffer">分类</a><a class="menu-item" href="/about/" title="" rel="noopener noreffer">关于</a><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>

<script>
    window.desktopHeaderMode = "fixed";
    window.mobileHeaderMode = "auto";
</script>
<main class="main">
                <div class="container"><article class="page single"><h1 class="single-title animated flipInX">微服务概述</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="http://syncd.cn" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw"></i>fan</a>
</span>&nbsp;
                    <span class="post-category">收录于<a href="/categories/%E5%BE%AE%E6%9C%8D%E5%8A%A1">
                                <i class="far fa-folder fa-fw"></i>微服务
                            </a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i><time datetime=2020-04-30>2020-04-30</time>&nbsp;
                <i class="fas fa-pencil-alt fa-fw"></i>约 988 字&nbsp;
                <i class="far fa-clock fa-fw"></i>预计阅读 2 分钟&nbsp;</div>
        </div><div class="toc" id="toc-auto">
                <h2 class="toc-title">目录</h2>
                <div class="toc-content" id="toc-content-auto"></div>
            </div>
            <div class="toc" id="toc-static">
                <details>
                    <summary>
                        <div class="toc-title">
                            <span>目录</span>
                            <span><i class="details icon fas fa-angle-down"></i></span>
                        </div>
                    </summary>
                    <div class="toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#单体应用">单体应用</a>
      <ul>
        <li><a href="#什么是单体应用">什么是单体应用</a></li>
        <li><a href="#单体应用的优缺点">单体应用的优缺点</a></li>
      </ul>
    </li>
    <li><a href="#微服应用">微服应用</a>
      <ul>
        <li><a href="#什么是微服务">什么是微服务</a></li>
        <li><a href="#微服务的优缺点">微服务的优缺点</a></li>
        <li><a href="#落地微服务的关键因素">落地微服务的关键因素</a></li>
      </ul>
    </li>
    <li><a href="#微服务生态">微服务生态</a>
      <ul>
        <li><a href="#硬件层">硬件层</a></li>
        <li><a href="#通信层">通信层</a>
          <ul>
            <li><a href="#网络传输层">网络传输层</a></li>
            <li><a href="#服务注册与发现">服务注册与发现</a></li>
          </ul>
        </li>
        <li><a href="#支撑平台">支撑平台</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
                </details>
            </div><div class="content" id="content"><h1 id="微服务概述">微服务概述</h1>
<h2 id="单体应用">单体应用</h2>
<p>学习微服务之前先看看看传统的单体应用</p>
<h3 id="什么是单体应用">什么是单体应用</h3>
<ul>
<li>所有的业务功能都在一个应用程序里面</li>
<li>研发人员开发并维护同一个代码库</li>
<li>架构简单，典型的三层架构</li>
</ul>
<p><img
        class="lazyload"
        src="/svg/loading.small.min.svg"
        data-sizes="auto"
        data-srcset="https://s1.ax1x.com/2020/04/29/JHNAwd.png,  1.5x,  2x"
        data-src=""
        alt="JHNAwd.png"
        title="JHNAwd.png" /></p>
<p>随着业务的发展，访问量的不断增加，单体应用已经无法满足业务的需求，这个时候单体应用通常的解决方案是通过横向扩展来提高并发能力，如下：</p>
<p><img
        class="lazyload"
        src="/svg/loading.small.min.svg"
        data-sizes="auto"
        data-srcset="https://s1.ax1x.com/2020/04/30/JHU6bQ.png,  1.5x,  2x"
        data-src=""
        alt="JHU6bQ.png"
        title="JHU6bQ.png" /></p>
<h3 id="单体应用的优缺点">单体应用的优缺点</h3>
<p>优点：</p>
<ul>
<li>架构简单，容易上手</li>
<li>部署简单，没有复杂的依赖</li>
<li>测试方便，一旦部署，所有功能就可以测试</li>
</ul>
<p>缺点：</p>
<ul>
<li>复杂度高，代码越来越庞大</li>
<li>开发效率低，开发协作越来越麻烦</li>
<li>牵一发动全身，任何一个功能出故障，可能系统就直接瘫痪了</li>
</ul>
<h2 id="微服应用">微服应用</h2>
<h3 id="什么是微服务">什么是微服务</h3>
<ul>
<li>
<p>简单说就是微小的服务或应用，比如linux上的各种工具：ls,cat,awk等</p>
</li>
<li>
<p>微服务就是让每个小的服务专注的做好一件事</p>
</li>
<li>
<p>每个服务单独开发和部署，服务之间是完全隔离的</p>
</li>
</ul>
<p>通过下面两个图来把微服和单体应用做对比</p>
<p><img
        class="lazyload"
        src="/svg/loading.small.min.svg"
        data-sizes="auto"
        data-srcset="https://s1.ax1x.com/2020/04/30/JH0ho4.png,  1.5x,  2x"
        data-src=""
        alt="JH0ho4.png"
        title="JH0ho4.png" /></p>
<p>相比于单体应用，微服务将单体应用的功能拆分未多个微小的服务，而服务与服务之间通过网络调用实现</p>
<h3 id="微服务的优缺点">微服务的优缺点</h3>
<p>优点：</p>
<ul>
<li>迭代周期短，极大的提升开发效率</li>
<li>独立部署，独立开发</li>
<li>可伸缩性好，能够针对指定的服务进行伸缩</li>
<li>故障隔离，不会相互影响</li>
</ul>
<p>缺点：</p>
<ul>
<li>复杂度增加，一个请求往往要经过多个服务，请求链路比较长</li>
<li>监控和定位问题困难</li>
<li>服务管理比较复杂</li>
</ul>
<h3 id="落地微服务的关键因素">落地微服务的关键因素</h3>
<p>配套设施：</p>
<ul>
<li>微服务框架研发和维护</li>
<li>打包，版本管理，上线平台支持</li>
<li>硬件层支持，比如容易和容器调度</li>
<li>服务治理平台支持，比如分布式链路追踪和监控</li>
<li>测试自动化支持，比如上线前自动化case</li>
</ul>
<p>组织架构</p>
<ul>
<li>微服务框架开发团队</li>
<li>私有云研发团队</li>
<li>测试平台研发团队</li>
</ul>
<h2 id="微服务生态">微服务生态</h2>
<p>微服务层次换分：</p>
<ul>
<li>硬件层</li>
<li>通信层</li>
<li>应用平台层</li>
<li>微服务层</li>
</ul>
<h3 id="硬件层">硬件层</h3>
<ul>
<li>
<p>物理服务器管理</p>
</li>
<li>
<p>操作系统管理</p>
</li>
<li>
<p>配置管理</p>
</li>
<li>
<p>资源隔离和抽象</p>
</li>
<li>
<p>主机监控和日志</p>
</li>
</ul>
<p>硬件层架构：</p>
<p><img
        class="lazyload"
        src="/svg/loading.small.min.svg"
        data-sizes="auto"
        data-srcset="https://s1.ax1x.com/2020/04/30/JHhJAI.png,  1.5x,  2x"
        data-src=""
        alt="JHhJAI.png"
        title="JHhJAI.png" /></p>
<h3 id="通信层">通信层</h3>
<ul>
<li>网络传输</li>
<li>RPC（rpc客户端和rpc服务端）</li>
<li>服务发现</li>
<li>服务注册</li>
<li>负载均衡</li>
<li>消息传递</li>
</ul>
<h4 id="网络传输层">网络传输层</h4>
<ul>
<li>HTTP+RESTFUL:GET,POST,PUT,DELETE</li>
<li>TCP RPC 调用:Thrift,Dubbox, GRPC</li>
<li>消息传递:JSON, Thrift, protobuf</li>
</ul>
<h4 id="服务注册与发现">服务注册与发现</h4>
<p>分布式数据存储</p>
<ul>
<li>Consul</li>
<li>Etcd</li>
<li>Zookeeper</li>
</ul>
<p>CAP原理：</p>
<ul>
<li>C: consistency, 一致性，每次总是能够读到最近写入的数据或者失败</li>
<li>A: available, 每次请求都能读到数据</li>
<li>P: partition tolerance  分区容忍,不管任意个消息由于网络原因失败,系统都能能够继续工作</li>
</ul>
<p>CAP原理中，P是必须满足的，C,和A 可以根据业务需要选择，要么是CP系统，要么是AP系统</p>
<h3 id="支撑平台">支撑平台</h3>
<ul>
<li>私有云平台</li>
<li>服务管理平台</li>
<li>监控报警平台</li>
<li>测试&amp;构建&amp;发布平台</li>
<li>日志检索平台</li>
<li>服务治理平台</li>
<li>Metrics平台</li>
</ul>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>本文于 2020-04-30 更新</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="分享到 Twitter" data-sharer="twitter" data-url="http://example.org/microservices_summary/" data-title="微服务概述" data-hashtags="微服务"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Evernote" data-sharer="evernote" data-url="http://example.org/microservices_summary/" data-title="微服务概述"><i class="fab fa-evernote fa-fw"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1">微服务</a></section>
        <section>
            <span><a href="javascript:window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/development_standard/" class="prev" rel="prev" title="开发中的一些规范"><i class="fas fa-angle-left fa-fw"></i>开发中的一些规范</a>
            <a href="/postgresql_notes_1/" class="next" rel="next" title="PostgreSQL学习笔记1--PostgreSQL安装">PostgreSQL学习笔记1--PostgreSQL安装<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div class="comment"><div id="gitalk"></div><script>
            document.addEventListener("DOMContentLoaded", function(event) {
                var gitalk = new Gitalk({
                    id: '2020-04-30 07:06:58 \x2b0800 CST',
                    title: '微服务概述',
                    clientID: '12d62df89f42baf9a471',
                    clientSecret: '603bc3951c1c2a0685201df45862a1fdb34a83f1',
                    repo: 'blogComment',
                    owner: 'peanut-pg',
                    admin: ['peanut-pg'],
                    body: decodeURI(location.href),
                });
                gitalk.render('gitalk');
            });
        </script>
        <noscript>
            Please enable JavaScript to view the <a href="https://github.com/gitalk/gitalk">comments powered by Gitalk.</a>
        </noscript></div>
    </article></div>
            </main><footer class="footer">
    <div class="copyright"><div class="copyright-line">由 <a href="https://gohugo.io/" target="_blank" rel="external nofollow noopener noreffer">Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="external nofollow noopener noreffer"><i class="far fa-heart fa-fw"></i> LoveIt</a>
        </div>

        <div class="copyright-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2020</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="http://syncd.cn" target="_blank">zhaofan</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span><span class="icp-splitter">&nbsp;|&nbsp;</span><br class="icp-br"/>
                <span class="icp">京ICP备17004069号-2</span></div>
    </div>
</footer>
</div><a href="#" class="dynamic-to-top animated faster" id="dynamic-to-top">
            <i class="fas fa-chevron-up fa-fw"></i>
        </a><script>
        document.addEventListener('DOMContentLoaded', function () {
            lightGallery(document.getElementById('content'), {
                selector: '.lightgallery',
                speed: 400,
                hideBarsDelay: 2000,
                thumbnail: true,
                exThumbImage: 'data-thumbnail',
                thumbWidth: 80,
                thumbContHeight: 80,
            });
        });
    </script><link rel="stylesheet" href="/lib/gitalk/gitalk.min.css"><link rel="stylesheet" href="/lib/lightgallery/lightgallery.min.css"><script src="/lib/gitalk/gitalk.min.js"></script><script src="/lib/smooth-scroll/smooth-scroll.polyfills.min.js"></script><script src="/lib/sharer/sharer.min.js"></script><script src="/lib/lazysizes/lazysizes.min.js"></script><script src="/lib/lightgallery/lightgallery.min.js"></script><script src="/lib/lightgallery/lg-thumbnail.min.js"></script><script src="/lib/lightgallery/lg-zoom.min.js"></script><script src="/js/theme.min.js"></script></body>
</html>
